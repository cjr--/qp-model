define(module,function(e,t){var i=t("qp-utility");i.make(e,{ns:"qp-model/model",create:function(e,t){e.create(t,{instance:this})},refresh:function(){},set_user:function(e){i.is(e,"array")&&(e=i.find(e,{id:this.user_id})),i.is(e,"user")&&(this.user=e,this.user_id=e.id)}})}),define(module,function(e,t){var i=t("qp-utility");function n(){return""}function a(){return 0}function r(){return!1}function u(){return new Date}function l(){return(new Date).setUTCHours(12,0,0,0)}i.module(e,{ns:"qp-model/schema",build:function(e,t){t.create=this.create.bind(this,t.columns),t.table={name:t.table},t.fields={managed:[],all:[]},i.each_own(t.columns,function(e,i){e.name=i,e.managed?t.fields.managed.push(i):t.fields.all.push(i)}),e(t)},create:function(e,t,n){return n=i.options(n,{internal:!1}),i.is(t,"array")?i.map(t,function(t){return this.create_item(e,t,{},n)}.bind(this)):i.is(t,"object")?this.create_item(e,t,n.instance||{},n):null},create_item:function(e,t,n,a){return i.is(t,"object")&&i.each_own(e,function(e,i){!a.internal&&e.internal||(n[i]=t[i]||e.default())}),n||{}},field:function(e,t,s,o){var d;return i.is(t,"object","undefined")?(o=t,t=s=0):i.is(s,"object","undefined")&&(o=s,s=0),d="text"===e&&0===t?{type:"varchar",size:t,default:n}:"text"===e?{type:"text",default:n}:"smallint"===e||"int2"===e?{type:"smallint",size:2,default:a}:"int"===e||"int4"===e||"integer"===e?{type:"integer",size:4,default:a}:"bigint"===e||"int8"===e?{type:"bigint",size:8,default:a}:"numeric"===e||"decimal"===e||"number"===e?{type:"numeric",size:t,scale:s,default:a}:"currency"===e?{type:"numeric",size:12,scale:4,default:a}:"bool"===e||"boolean"===e?{type:"boolean",default:r}:"datetime"===e?{type:"timestamp with time zone",default:u}:"date"===e?{type:"timestamp with time zone",default:l}:"smallserial"===e?{type:"smallserial",default:i.noop}:"serial"===e?{type:"serial",default:i.noop}:"bigserial"===e?{type:"bigserial",default:i.noop}:{type:"",default:i.noop},i.options(d,o)},primary:function(){return this.field("integer",{primary:!0,managed:!0})},primary_key:function(){return this.field("integer",{primary_key:!0,sequence:!0,managed:!1})},foreign:function(e){return this.field("integer",{foreign:!0,table:e})},foreign_ids:function(e){return this.field("integer",{foreign:!0,table:e,array:!0})},unique:function(){return this.field("integer",{unique:!0,managed:!1})},created:function(){return this.field("datetime",{managed:!0})},modified:function(){return this.field("datetime",{managed:!0})}})});